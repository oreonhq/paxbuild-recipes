name: alsa-utils
version: 1.2.13
description: ALSA utilities
license: GPL-2.0-or-later
homepage: https://www.alsa-project.org/
source_url: https://www.alsa-project.org/files/pub/utils/alsa-utils-1.2.13.tar.bz2
build:
  build_system: Autotools
  build_commands:
  - "export PKG_CONFIG_PATH=\"/usr/lib/pkgconfig:/usr/lib64/pkgconfig:/usr/share/pkgconfig\"\n# Try to get include directory from pkg-config\nALSA_INCLUDE=\"\"\nif pkg-config --exists alsa 2>/dev/null; then\n  ALSA_INCLUDE=$(pkg-config --variable=includedir alsa 2>/dev/null || echo \"\")\n  if [ -n \"$ALSA_INCLUDE\" ] && [ -f \"$ALSA_INCLUDE/alsa/asoundlib.h\" ]; then\n    echo \"Found ALSA headers via pkg-config: $ALSA_INCLUDE\"\n  else\n    ALSA_INCLUDE=\"\"\n  fi\nfi\n# If pkg-config didn't work, search common locations\nif [ -z \"$ALSA_INCLUDE\" ]; then\n  for dir in /usr/include /usr/local/include /opt/alsa/include; do\n    if [ -f \"$dir/alsa/asoundlib.h\" ]; then\n      ALSA_INCLUDE=\"$dir\"\n      echo \"Found ALSA headers in $dir\"\n      # Try to get version\n      if [ -f \"$dir/alsa/version.h\" ]; then\n        ALSA_VERSION=$(grep -E '^#define[[:space:]]+SND_LIB_VERSION_STR' \"$dir/alsa/version.h\" | sed 's/.*\"\\(.*\\)\".*/\\1/' | head -1)\n        if [ -n \"$ALSA_VERSION\"\
    \ ]; then\n          echo \"Found ALSA version: $ALSA_VERSION\"\n        fi\n      fi\n      break\n    fi\n  done\nfi\n# If still not found, try to find headers using find\nif [ -z \"$ALSA_INCLUDE\" ]; then\n  FOUND_HEADER=$(find /usr -name \"asoundlib.h\" -type f 2>/dev/null | head -1)\n  if [ -n \"$FOUND_HEADER\" ]; then\n    ALSA_INCLUDE=$(dirname \"$(dirname \"$FOUND_HEADER\")\")\n    echo \"Found ALSA headers via find: $ALSA_INCLUDE\"\n  fi\nfi\n# Also check if alsa-lib source is available (for build systems that don't install deps)\nif [ -z \"$ALSA_INCLUDE\" ]; then\n  for srcdir in ../alsa-lib* ../../alsa-lib* /tmp/*/alsa-lib*; do\n    if [ -f \"$srcdir/include/asoundlib.h\" ]; then\n      ALSA_INCLUDE=\"$srcdir/include\"\n      echo \"Found ALSA headers in source directory: $ALSA_INCLUDE\"\n      break\n    fi\n  done\nfi\n# Final fallback\nif [ -z \"$ALSA_INCLUDE\" ]; then\n  echo \"Warning: ALSA headers not found, configure may fail\"\n  ALSA_INCLUDE=\"/usr/include\"\nfi\n\
    export ALSA_CFLAGS=\"-I$ALSA_INCLUDE\"\nexport ALSA_LIBS=\"-lasound -lm -lpthread\"\nexport CPPFLAGS=\"-I$ALSA_INCLUDE\"\nexport LDFLAGS=\"-L/usr/lib -L/usr/lib64\"\n./configure --prefix=/usr CPPFLAGS=\"$CPPFLAGS\" LDFLAGS=\"$LDFLAGS\" ALSA_CFLAGS=\"$ALSA_CFLAGS\" ALSA_LIBS=\"$ALSA_LIBS\""
  - make
dependencies:
  build_dependencies:
  - gcc
  - make
  - pkgconf
  - alsa-lib
  host_dependencies: []
  runtime_dependencies:
  - glibc
  - alsa-lib
bootstrap:
  enabled: false
changelog:
- version: 1.2.13
  date: '2026-01-03'
  author: Oreon Project Team
  email: packaging@oreonproject.org
  changes:
  - Initial package for Oreon 11
